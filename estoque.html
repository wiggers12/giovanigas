<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Protótipo Estoque - Distribuidora</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; background: #f9f9f9; }
    h1 { text-align: center; color: #333; }
    .controls { margin-bottom: 20px; display: flex; flex-wrap: wrap; gap: 10px; }
    input, button { padding: 8px; border: 1px solid #ccc; border-radius: 4px; }
    button { background: #333; color: #fff; cursor: pointer; }
    button:hover { background: #555; }
    table { width: 100%; border-collapse: collapse; margin-top: 20px; background: #fff; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: left; }
    th { background: #eee; }
    .export-box { margin-top: 20px; background: #fff; padding: 10px; border: 1px solid #ccc; white-space: pre-wrap; }
  </style>
</head>
<body>
  <h1>Protótipo Estoque - Distribuidora</h1>

  <div class="controls">
    <input type="text" id="newField" placeholder="Nome do novo campo">
    <button onclick="addField()">Adicionar Campo</button>
    <button onclick="addRow()">Adicionar Linha</button>
    <button onclick="exportData()">Exportar Dados</button>
  </div>

  <table id="stockTable">
    <thead>
      <tr id="headerRow">
        <th>Produto</th>
        <th>Quantidade</th>
      </tr>
    </thead>
    <tbody id="tableBody"></tbody>
  </table>

  <h2>Exportação</h2>
  <div class="export-box" id="exportBox">Nenhum dado exportado ainda.</div>

  <script>
    const headerRow = document.getElementById("headerRow");
    const tableBody = document.getElementById("tableBody");
    const exportBox = document.getElementById("exportBox");

    // Adicionar campo
    function addField() {
      const newField = document.getElementById("newField").value.trim();
      if (!newField) return alert("Digite o nome do campo!");
      const th = document.createElement("th");
      th.textContent = newField;
      headerRow.appendChild(th);

      Array.from(tableBody.rows).forEach(row => {
        const td = document.createElement("td");
        const input = document.createElement("input");
        input.type = "text";
        td.appendChild(input);
        row.appendChild(td);
      });
      document.getElementById("newField").value = "";
    }

    // Adicionar linha
    function addRow() {
      const row = document.createElement("tr");
      Array.from(headerRow.cells).forEach(() => {
        const td = document.createElement("td");
        const input = document.createElement("input");
        input.type = "text";
        td.appendChild(input);
        row.appendChild(td);
      });
      tableBody.appendChild(row);
    }

    // Exportar dados
    function exportData() {
      const headers = Array.from(headerRow.cells).map(cell => cell.textContent);
      const rows = Array.from(tableBody.rows).map(row => {
        const obj = {};
        Array.from(row.cells).forEach((cell, i) => {
          obj[headers[i]] = cell.querySelector("input").value;
        });
        return obj;
      });
      exportBox.textContent = JSON.stringify(rows, null, 2);
    }
  </script>
</body>
</html>
